{% extends "base.html" %}
{% load static %}

{% block title %}EudaimoniaGo Dashboard{% endblock title %}

{% block content %}
<div class="container py-5">
  <div class="row mb-4">
    <div class="col-md-8">
      <h1>Welcome to EudaimoniaGo</h1>
      <h3>Hello, {{ player.user.username }}!</h3>
      <p class="lead">Rank: {{ player.rank }} | Experience: {{ player.experience_points }}</p>
    </div>
    <div class="col-md-4 text-end">
      <a href="{% url 'core:map' %}" class="btn btn-primary btn-lg">Open Map</a>
    </div>
  </div>
  
  <!-- Happiness Metrics -->
  <div class="row mb-4">
    <div class="col-md-12">
      <div class="card">
        <div class="card-header">
          <h4>Happiness Metrics</h4>
        </div>
        <div class="card-body">
          <div class="row">
            <!-- Soul Metrics -->
            <div class="col-md-4">
              <h5>Soul</h5>
              <div class="progress mb-2">
                <div class="progress-bar bg-primary" role="progressbar" style="width: {{ happiness.wisdom }}%" aria-valuenow="{{ happiness.wisdom }}" aria-valuemin="0" aria-valuemax="100">Wisdom: {{ happiness.wisdom }}</div>
              </div>
              <div class="progress mb-2">
                <div class="progress-bar bg-success" role="progressbar" style="width: {{ happiness.courage }}%" aria-valuenow="{{ happiness.courage }}" aria-valuemin="0" aria-valuemax="100">Courage: {{ happiness.courage }}</div>
              </div>
              <div class="progress mb-2">
                <div class="progress-bar bg-info" role="progressbar" style="width: {{ happiness.temperance }}%" aria-valuenow="{{ happiness.temperance }}" aria-valuemin="0" aria-valuemax="100">Temperance: {{ happiness.temperance }}</div>
              </div>
              <div class="progress mb-2">
                <div class="progress-bar bg-warning" role="progressbar" style="width: {{ happiness.justice }}%" aria-valuenow="{{ happiness.justice }}" aria-valuemin="0" aria-valuemax="100">Justice: {{ happiness.justice }}</div>
              </div>
              <p>Average: {{ happiness.soul_average|floatformat:1 }}</p>
            </div>
            
            <!-- Body Metrics -->
            <div class="col-md-4">
              <h5>Body</h5>
              <div class="progress mb-2">
                <div class="progress-bar bg-primary" role="progressbar" style="width: {{ happiness.strength }}%" aria-valuenow="{{ happiness.strength }}" aria-valuemin="0" aria-valuemax="100">Strength: {{ happiness.strength }}</div>
              </div>
              <div class="progress mb-2">
                <div class="progress-bar bg-success" role="progressbar" style="width: {{ happiness.wealth }}%" aria-valuenow="{{ happiness.wealth }}" aria-valuemin="0" aria-valuemax="100">Wealth: {{ happiness.wealth }}</div>
              </div>
              <div class="progress mb-2">
                <div class="progress-bar bg-info" role="progressbar" style="width: {{ happiness.beauty }}%" aria-valuenow="{{ happiness.beauty }}" aria-valuemin="0" aria-valuemax="100">Beauty: {{ happiness.beauty }}</div>
              </div>
              <div class="progress mb-2">
                <div class="progress-bar bg-warning" role="progressbar" style="width: {{ happiness.health }}%" aria-valuenow="{{ happiness.health }}" aria-valuemin="0" aria-valuemax="100">Health: {{ happiness.health }}</div>
              </div>
              <p>Average: {{ happiness.body_average|floatformat:1 }}</p>
            </div>
            
            <!-- Environment Metrics -->
            <div class="col-md-4">
              <h5>Environment</h5>
              <div class="progress mb-2">
                <div class="progress-bar bg-primary" role="progressbar" style="width: {{ happiness.resources }}%" aria-valuenow="{{ happiness.resources }}" aria-valuemin="0" aria-valuemax="100">Resources: {{ happiness.resources }}</div>
              </div>
              <div class="progress mb-2">
                <div class="progress-bar bg-success" role="progressbar" style="width: {{ happiness.friendships }}%" aria-valuenow="{{ happiness.friendships }}" aria-valuemin="0" aria-valuemax="100">Friendships: {{ happiness.friendships }}</div>
              </div>
              <div class="progress mb-2">
                <div class="progress-bar bg-info" role="progressbar" style="width: {{ happiness.honors }}%" aria-valuenow="{{ happiness.honors }}" aria-valuemin="0" aria-valuemax="100">Honors: {{ happiness.honors }}</div>
              </div>
              <div class="progress mb-2">
                <div class="progress-bar bg-warning" role="progressbar" style="width: {{ happiness.glory }}%" aria-valuenow="{{ happiness.glory }}" aria-valuemin="0" aria-valuemax="100">Glory: {{ happiness.glory }}</div>
              </div>
              <p>Average: {{ happiness.environment_average|floatformat:1 }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Quick Access Tiles -->
  <div class="row mb-4">
    <div class="col-md-3">
      <div class="card h-100">
        <div class="card-body text-center">
          <h5 class="card-title">Experiences</h5>
          <p class="card-text">Engage in quests, challenges, and collaborations</p>
          <a href="{% url 'experiences:experience_list' %}" class="btn btn-primary">View Experiences</a>
        </div>
      </div>
    </div>
    
    <div class="col-md-3">
      <div class="card h-100">
        <div class="card-body text-center">
          <h5 class="card-title">Powers</h5>
          <p class="card-text">View your mastered powers and skills</p>
          <a href="{% url 'experiences:power_list' %}" class="btn btn-success">View Powers</a>
        </div>
      </div>
    </div>
    
    <div class="col-md-3">
      <div class="card h-100">
        <div class="card-body text-center">
          <h5 class="card-title">Zones</h5>
          <p class="card-text">Explore zones and their think/production tanks</p>
          <a href="#" class="btn btn-info">View Zones</a>
        </div>
      </div>
    </div>
    
    <div class="col-md-3">
      <div class="card h-100">
        <div class="card-body text-center">
          <h5 class="card-title">Innovations</h5>
          <p class="card-text">Contribute to the Vitruvian Innovation Loop</p>
          <a href="#" class="btn btn-warning">Innovations</a>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Activity Feed -->
  <div class="row">
    <div class="col-md-12">
      <div class="card">
        <div class="card-header">
          <h4>Recent Activity</h4>
        </div>
        <div class="card-body">
          <p>This section will show recent activities like completed experiences, power mastery, etc.</p>
          <!-- In the real implementation, this would be populated with actual activity data -->
          <ul class="list-group list-group-flush">
            <li class="list-group-item">Started a new Experience: Sample Experience</li>
            <li class="list-group-item">Leveled up to Rank {{ player.rank }}</li>
            <li class="list-group-item">Mastered a new Power: Sample Power</li>
            <li class="list-group-item">Contributed to Zone: Sample Zone</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock content %}